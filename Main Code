import turtle
from turtle import *
import random

screen = Screen()
screen.title("myscreen")
screen.bgcolor("black")
screen.tracer(0)


class playership:
    def __init__(self):
        self.turtle = Turtle()
        self.turtle.shape("triangle")
        self.turtle.color("white")
        self.turtle.penup()
        self.turtle.goto(0, -300)
        self.turtle.setheading(90)

    def move_left(self):
        if self.turtle.xcor() > -340:
            self.turtle.setx(self.turtle.xcor() - 20)

    def move_right(self):
        if self.turtle.xcor() < 340:
            self.turtle.setx(self.turtle.xcor() + 20)

    def get_x_position(self):
        return self.turtle.xcor()

    def get_y_position(self):
        return self.turtle.ycor()


class laser:
    def __init__(self):
        self.turtle = Turtle()
        self.turtle.shape("square")
        self.turtle.color("red")
        self.turtle.setheading(90)
        self.turtle.shapesize(stretch_wid=1, stretch_len=50)
        self.turtle.penup()
        self.turtle.hideturtle()

    #hide laser function for the ontimer
    def hide_laser(self):
        self.turtle.hideturtle()

    def fire_laser(self):
        player_x_position = player_ship.get_x_position()
        player_y_position = player_ship.get_y_position()

        self.turtle.goto(player_x_position, player_y_position + 510)
        self.turtle.showturtle()

        for alien_instance in aliens:
            if alien_instance.get_x_position() == player_x_position:
                #alien_instance.hide_alien()
                aliens.remove(alien_instance)
                break

        screen.ontimer(self.hide_laser, 100)


class alien:
    def __init__(self):
        self.turtle = turtle.Turtle()
        self.turtle.penup()
        self.turtle.setheading(270)

    def move(self):
        self.turtle.forward(self.speed)

    def get_x_position(self):
        return self.turtle.xcor()

    def get_y_position(self):
        return self.turtle.ycor()

    def hide(self):
        self.turtle.hideturtle()

class aliencharacteristics(alien):
    def __init__(self, shape, color, speed, y_spawn):
        super().__init__()
        self.turtle.shape(shape)
        self.turtle.color(color)
        self.speed = speed
        self.y_spawn = y_spawn
        self.turtle.goto(random.randint(-17, 17) * 20, self.y_spawn)

class normalalien(aliencharacteristics):
    def __init__(self):
        super().__init__("circle", "green", 0.03, 300)

class fastalien(aliencharacteristics):
    def __init__(self):
        super().__init__("triangle", "yellow", 0.05, 300)

class closealien(aliencharacteristics):
    def __init__(self):
        super().__init__("square", "blue", 0.02, 200)

#create the player's ship
player_ship = playership()

#create the laser
laser_beam = laser()

#create aliens
aliens = []
for x in range(10):
    thirtythreechance = random.randint(1,3)
    if thirtythreechance == 1:
        aliens.append(normalalien())
    if thirtythreechance == 2:
        aliens.append(fastalien())
    if thirtythreechance == 3:
        aliens.append(closealien())

screen.listen()
screen.onkeypress(player_ship.move_left, "Left")
screen.onkeypress(player_ship.move_right, "Right")
screen.onkeypress(laser_beam.fire_laser, "space")

#main loop
while(True):
    for alien_instance in aliens:
        alien_instance.move()
        if alien_instance.get_y_position() <= -300:
            print ('you lost')
            exit()
    screen.update()
